"use strict";!function(){var l,s,d,r,o;"undefined"!=typeof wp&&(l=wp.i18n.__,null!==(s=document.querySelector("#social-planner-metabox > .inside"))&&void 0!==window.socialPlannerMetabox&&(d=window.socialPlannerMetabox,r=function(e,t){var n=document.createElement("div");n.classList.add("social-planner-snippet"),e.appendChild(n);e=document.createElement("textarea");e.classList.add("social-planner-excerpt"),e.setAttribute("placeholder",l("Social networks summary","social-planner")),e.setAttribute("name",t.name+"[excerpt]"),n.appendChild(e),function(e,t){if(wp.media){var n=document.createElement("figure");n.classList.add("social-planner-poster"),e.appendChild(n);var a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name",t.name+"[attachment]"),n.appendChild(a);var i=document.createElement("button");i.classList.add("choose"),i.setAttribute("type","button"),i.textContent="+",n.appendChild(i);var s=document.createElement("img");i.addEventListener("click",function(){var t=wp.media({title:l("Choose poster image","social-planner"),multiple:!1});t.on("select",function(){var e=t.state().get("selection").first().toJSON();a.value=e.id,void 0!==e.sizes.thumbnail&&(e=e.sizes.thumbnail),s.setAttribute("src",e.url),n.insertBefore(s,i)}),t.open()});t=document.createElement("button");t.classList.add("remove"),t.setAttribute("type","button"),n.appendChild(t),t.addEventListener("click",function(e){e.stopPropagation(),n.removeChild(s),a.value=""})}}(n,t)},o=function(e,t){var n=document.createElement("div");n.classList.add("social-planner-task"),e.appendChild(n);var a,i=document.createElement("div");for(a in i.classList.add("social-planner-targets"),n.appendChild(i),d.providers){var s=d.providers[a];s.label&&((s=function(e,t){var n=document.createElement("label");n.classList.add("social-planner-check"),e.append(n);e=document.createElement("input");e.setAttribute("type","checkbox"),n.appendChild(e);e=document.createElement("span");return e.textContent=t,n.appendChild(e),n}(i,s.label).querySelector("input")).setAttribute("name",t.name+"[targets][]"),s.value=a)}var l=document.createElement("button");l.classList.add("social-planner-remove"),l.setAttribute("type","button"),n.appendChild(l),l.addEventListener("click",function(){e.removeChild(n)}),r(n,t)},function(){var e,t,n,a,i=document.createElement("div");if(i.classList.add("social-planner-list"),s.appendChild(i),!d.meta||!d.providers)return e=l("You need to configure providers on the plugin settings page.","social-planner"),(n=document.createElement("p")).classList.add("social-planner-warning"),n.textContent=e,s.appendChild(n);for(a in d.tasks=d.tasks||{},t=s,(n=document.createElement("button")).classList.add("social-planner-append","button"),n.setAttribute("type","button"),n.textContent=l("Add task","social-planner"),n.addEventListener("click",function(){var e=(new Date).getTime().toString(16);o(t,{name:d.meta+"["+e+"]"})}),s.appendChild(n),d.tasks)o(i,{data:d.tasks[a],name:d.meta+"["+a+"]"})}()))}();